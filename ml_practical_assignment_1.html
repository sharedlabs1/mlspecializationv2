<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Practical Assignment 1: House Price Prediction System</title>
    
    <!-- Monaco Editor for code syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 30px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        h1 {
            color: #667eea;
            font-size: 2.8em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            color: #666;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .case-study-banner {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .case-study-banner h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .nav-pills {
            display: flex;
            background: white;
            border-radius: 15px;
            padding: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .nav-pill {
            padding: 15px 25px;
            border-radius: 10px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
            margin: 2px;
            font-size: 1em;
        }

        .nav-pill.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .nav-pill:hover {
            background: #f0f4ff;
        }

        .assignment-section {
            background: white;
            border-radius: 15px;
            padding: 35px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            display: none;
        }

        .assignment-section.active {
            display: block;
        }

        .assignment-section h2 {
            color: #667eea;
            font-size: 2.2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .assignment-section h3 {
            color: #555;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            padding: 10px 0;
            border-left: 4px solid #667eea;
            padding-left: 15px;
        }

        .business-scenario {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .business-scenario h4 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scenario-icon {
            background: #667eea;
            color: white;
            padding: 8px;
            border-radius: 50%;
            font-size: 0.9em;
        }

        .step-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
        }

        .step-number {
            position: absolute;
            top: -12px;
            left: 20px;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            position: relative;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.5;
        }

        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #f39c12;
        }

        .info-box {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }

        .success-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
        }

        .requirements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .requirement-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .requirement-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .requirement-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .deliverable-checklist {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }

        .deliverable-checklist h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 10px 0;
            padding: 8px 0;
        }

        .checklist-item input[type="checkbox"] {
            margin-top: 3px;
            transform: scale(1.2);
        }

        .evaluation-criteria {
            background: linear-gradient(135deg, #fff5f5, #f0fff4);
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .criteria-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .file-tree {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: monospace;
        }

        .file-tree ul {
            list-style: none;
            padding-left: 20px;
        }

        .file-tree li {
            margin: 5px 0;
            position: relative;
        }

        .file-tree li:before {
            content: "├── ";
            color: #6c757d;
        }

        .file-tree li:last-child:before {
            content: "└── ";
        }

        .btn {
            background: #667eea;
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 8px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 10px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            h1 {
                font-size: 2.2em;
            }
            
            .nav-pills {
                flex-direction: column;
                gap: 5px;
            }
            
            .assignment-section {
                padding: 20px;
            }
            
            .requirements-grid,
            .criteria-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Prism.js customization */
        pre[class*="language-"] {
            background: #1e1e1e !important;
            color: #d4d4d4 !important;
            border-radius: 10px !important;
            padding: 20px !important;
            margin: 15px 0 !important;
            overflow-x: auto !important;
        }

        .token.comment {
            color: #6a9955 !important;
        }

        .token.string {
            color: #ce9178 !important;
        }

        .token.keyword {
            color: #569cd6 !important;
        }

        .token.function {
            color: #dcdcaa !important;
        }

        .token.number {
            color: #b5cea8 !important;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ML Practical Assignment 1</h1>
            <p class="subtitle">House Price Prediction System - End-to-End Machine Learning Project</p>
        </div>
    </div>

    <div class="container">
        <div class="case-study-banner">
            <h2>🏠 Case Study: TechCorp Real Estate Intelligence Platform</h2>
            <p>Build a production-ready machine learning system for automated property valuation</p>
        </div>

        <div class="nav-pills">
            <button class="nav-pill active" onclick="showSection('overview')">📋 Overview</button>
            <button class="nav-pill" onclick="showSection('requirements')">📝 Requirements</button>
            <button class="nav-pill" onclick="showSection('implementation')">💻 Implementation</button>
            <button class="nav-pill" onclick="showSection('evaluation')">📊 Evaluation</button>
            <button class="nav-pill" onclick="showSection('deployment')">🚀 Deployment</button>
            <button class="nav-pill" onclick="showSection('submission')">📤 Submission</button>
        </div>

        <!-- Overview Section -->
        <div id="overview" class="assignment-section active">
            <h2>Project Overview</h2>
            
            <div class="business-scenario">
                <h4><span class="scenario-icon">🏢</span>Business Scenario</h4>
                <p><strong>TechCorp Real Estate</strong> is a leading property technology company that helps clients make informed real estate decisions. They want to build an automated property valuation system that can:</p>
                <ul style="margin-top: 15px; padding-left: 20px;">
                    <li>Predict house prices based on property features</li>
                    <li>Provide instant valuations for potential buyers and sellers</li>
                    <li>Help real estate agents price properties competitively</li>
                    <li>Identify undervalued properties for investment opportunities</li>
                </ul>
            </div>

            <div class="info-box">
                <h4>🎯 Learning Objectives</h4>
                <p>By completing this assignment, you will:</p>
                <ul>
                    <li>Build an end-to-end machine learning pipeline</li>
                    <li>Apply data preprocessing and feature engineering techniques</li>
                    <li>Compare different regression algorithms</li>
                    <li>Implement proper model evaluation and validation</li>
                    <li>Deploy a machine learning model for production use</li>
                </ul>
            </div>

            <h3>📊 Dataset Information</h3>
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>California Housing Dataset</h4>
                <p>You'll work with the California Housing dataset containing 20,640 samples with the following features:</p>
                <ul>
                    <li><strong>longitude:</strong> Longitude coordinate</li>
                    <li><strong>latitude:</strong> Latitude coordinate</li>
                    <li><strong>housing_median_age:</strong> Median age of houses in the block</li>
                    <li><strong>total_rooms:</strong> Total number of rooms per block</li>
                    <li><strong>total_bedrooms:</strong> Total number of bedrooms per block</li>
                    <li><strong>population:</strong> Total population per block</li>
                    <li><strong>households:</strong> Total number of households per block</li>
                    <li><strong>median_income:</strong> Median income per block (in tens of thousands)</li>
                    <li><strong>ocean_proximity:</strong> Categorical feature for location relative to ocean</li>
                    <li><strong>median_house_value:</strong> Target variable (in dollars)</li>
                </ul>
            </div>

            <h3>🎯 Project Goals</h3>
            <div class="requirements-grid">
                <div class="requirement-card">
                    <h4>🔍 Primary Objective</h4>
                    <p>Build a regression model that can predict house prices with RMSE < $50,000</p>
                </div>
                <div class="requirement-card">
                    <h4>📈 Business Impact</h4>
                    <p>Enable real-time property valuations for TechCorp's web platform</p>
                </div>
                <div class="requirement-card">
                    <h4>⚡ Performance</h4>
                    <p>Model should provide predictions in under 100ms for production use</p>
                </div>
                <div class="requirement-card">
                    <h4>📱 Deployment</h4>
                    <p>Create a web API that real estate agents can use in the field</p>
                </div>
            </div>

            <div class="warning-box">
                <h4>⚠️ Important Notes</h4>
                <ul>
                    <li>This is a <strong>regression problem</strong> (predicting continuous values)</li>
                    <li>Focus on both model accuracy and interpretability</li>
                    <li>Consider the business impact of prediction errors</li>
                    <li>Document your approach for stakeholder communication</li>
                </ul>
            </div>
        </div>

        <!-- Requirements Section -->
        <div id="requirements" class="assignment-section">
            <h2>Technical Requirements</h2>

            <h3>🛠️ Environment Setup</h3>
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Required Libraries</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-bash"># Install required packages
pip install pandas numpy scikit-learn matplotlib seaborn
pip install jupyter notebook plotly flask joblib

# For advanced features (optional)
pip install xgboost lightgbm optuna streamlit</code></pre>
                </div>
            </div>

            <h3>📁 Project Structure</h3>
            <div class="file-tree">
                <strong>house_price_prediction/</strong>
                <ul>
                    <li>data/
                        <ul>
                            <li>raw/
                                <ul><li>housing.csv</li></ul>
                            </li>
                            <li>processed/
                                <ul><li>train.csv</li><li>test.csv</li></ul>
                            </li>
                        </ul>
                    </li>
                    <li>notebooks/
                        <ul>
                            <li>01_data_exploration.ipynb</li>
                            <li>02_feature_engineering.ipynb</li>
                            <li>03_model_training.ipynb</li>
                            <li>04_model_evaluation.ipynb</li>
                        </ul>
                    </li>
                    <li>src/
                        <ul>
                            <li>data_preprocessing.py</li>
                            <li>feature_engineering.py</li>
                            <li>model_training.py</li>
                            <li>model_evaluation.py</li>
                            <li>utils.py</li>
                        </ul>
                    </li>
                    <li>models/
                        <ul>
                            <li>trained_model.pkl</li>
                            <li>preprocessor.pkl</li>
                        </ul>
                    </li>
                    <li>api/
                        <ul>
                            <li>app.py</li>
                            <li>requirements.txt</li>
                        </ul>
                    </li>
                    <li>README.md</li>
                    <li>requirements.txt</li>
                </ul>
            </div>

            <h3>🎯 Core Requirements</h3>
            <div class="deliverable-checklist">
                <h4>✅ Must-Have Features</h4>
                <div class="checklist-item">
                    <input type="checkbox" id="req1">
                    <label for="req1"><strong>Data Exploration:</strong> Comprehensive EDA with visualizations and insights</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req2">
                    <label for="req2"><strong>Data Preprocessing:</strong> Handle missing values, outliers, and data types</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req3">
                    <label for="req3"><strong>Feature Engineering:</strong> Create meaningful features from existing data</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req4">
                    <label for="req4"><strong>Model Training:</strong> Train at least 3 different regression algorithms</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req5">
                    <label for="req5"><strong>Model Evaluation:</strong> Use appropriate metrics and cross-validation</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req6">
                    <label for="req6"><strong>Hyperparameter Tuning:</strong> Optimize model performance</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req7">
                    <label for="req7"><strong>Model Deployment:</strong> Create a web API for predictions</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="req8">
                    <label for="req8"><strong>Documentation:</strong> Clear code documentation and README</label>
                </div>
            </div>

            <div class="success-box">
                <h4>🌟 Bonus Features (Optional)</h4>
                <ul>
                    <li>Interactive dashboard using Streamlit or Plotly Dash</li>
                    <li>Advanced feature engineering (polynomial features, clustering)</li>
                    <li>Ensemble methods and model stacking</li>
                    <li>Model interpretability using SHAP or LIME</li>
                    <li>Docker containerization for deployment</li>
                </ul>
            </div>
        </div>

        <!-- Implementation Section -->
        <div id="implementation" class="assignment-section">
            <h2>Implementation Guide</h2>

            <h3>📊 Phase 1: Data Exploration</h3>
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Load and Understand the Data</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.datasets import fetch_california_housing

# Load the California Housing dataset
housing = fetch_california_housing(as_frame=True)
df = housing.frame

# Basic information
print("Dataset shape:", df.shape)
print("\nColumn information:")
print(df.info())
print("\nFirst 5 rows:")
print(df.head())

# Check for missing values
print("\nMissing values:")
print(df.isnull().sum())</code></pre>
                </div>
            </div>

            <div class="step-card">
                <div class="step-number">2</div>
                <h4>Exploratory Data Analysis</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python"># Statistical summary
print("Statistical Summary:")
print(df.describe())

# Distribution of target variable
plt.figure(figsize=(12, 4))

plt.subplot(1, 2, 1)
plt.hist(df['MedHouseVal'], bins=50, alpha=0.7)
plt.title('Distribution of House Values')
plt.xlabel('Median House Value')

plt.subplot(1, 2, 2)
plt.boxplot(df['MedHouseVal'])
plt.title('Box Plot of House Values')
plt.ylabel('Median House Value')

plt.tight_layout()
plt.show()

# Correlation matrix
plt.figure(figsize=(10, 8))
correlation_matrix = df.corr()
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', center=0)
plt.title('Feature Correlation Matrix')
plt.show()</code></pre>
                </div>
            </div>

            <h3>🔧 Phase 2: Data Preprocessing</h3>
            <div class="step-card">
                <div class="step-number">3</div>
                <h4>Handle Missing Values and Outliers</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.impute import SimpleImputer

# Check for outliers using IQR method
def detect_outliers(df, column):
    Q1 = df[column].quantile(0.25)
    Q3 = df[column].quantile(0.75)
    IQR = Q3 - Q1
    lower_bound = Q1 - 1.5 * IQR
    upper_bound = Q3 + 1.5 * IQR
    
    outliers = df[(df[column] < lower_bound) | (df[column] > upper_bound)]
    return outliers

# Detect outliers in target variable
outliers = detect_outliers(df, 'MedHouseVal')
print(f"Number of outliers in target variable: {len(outliers)}")

# Remove extreme outliers (optional)
df_clean = df[df['MedHouseVal'] < 500000].copy()
print(f"Dataset shape after outlier removal: {df_clean.shape}")

# Split features and target
X = df_clean.drop('MedHouseVal', axis=1)
y = df_clean['MedHouseVal']

# Train-test split
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)</code></pre>
                </div>
            </div>

            <h3>🔨 Phase 3: Feature Engineering</h3>
            <div class="step-card">
                <div class="step-number">4</div>
                <h4>Create New Features</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">def create_features(df):
    """Create new features from existing ones"""
    df_new = df.copy()
    
    # Rooms per household
    df_new['rooms_per_household'] = df_new['AveRooms'] * df_new['AveOccup']
    
    # Bedrooms ratio
    df_new['bedrooms_ratio'] = df_new['AveBedrms'] / df_new['AveRooms']
    
    # Population per household
    df_new['population_per_household'] = df_new['Population'] / df_new['AveOccup']
    
    # Income categories
    df_new['income_category'] = pd.cut(df_new['MedInc'], 
                                      bins=[0, 1.5, 3.0, 4.5, 6.0, np.inf],
                                      labels=['very_low', 'low', 'medium', 'high', 'very_high'])
    
    return df_new

# Apply feature engineering
X_train_fe = create_features(X_train)
X_test_fe = create_features(X_test)

print("New features created:")
print(X_train_fe.columns.tolist())</code></pre>
                </div>
            </div>

            <h3>🤖 Phase 4: Model Training</h3>
            <div class="step-card">
                <div class="step-number">5</div>
                <h4>Train Multiple Models</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">from sklearn.linear_model import LinearRegression, Ridge, Lasso
from sklearn.ensemble import RandomForestRegressor, GradientBoostingRegressor
from sklearn.svm import SVR
from sklearn.preprocessing import OneHotEncoder
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error

# Preprocessing pipeline
numeric_features = X_train_fe.select_dtypes(include=[np.number]).columns
categorical_features = X_train_fe.select_dtypes(include=['object', 'category']).columns

preprocessor = ColumnTransformer(
    transformers=[
        ('num', StandardScaler(), numeric_features),
        ('cat', OneHotEncoder(drop='first'), categorical_features)
    ]
)

# Define models
models = {
    'Linear Regression': LinearRegression(),
    'Ridge Regression': Ridge(alpha=1.0),
    'Lasso Regression': Lasso(alpha=1.0),
    'Random Forest': RandomForestRegressor(n_estimators=100, random_state=42),
    'Gradient Boosting': GradientBoostingRegressor(n_estimators=100, random_state=42)
}

# Train and evaluate models
results = {}
for name, model in models.items():
    # Create pipeline
    pipeline = Pipeline([
        ('preprocessor', preprocessor),
        ('regressor', model)
    ])
    
    # Train model
    pipeline.fit(X_train_fe, y_train)
    
    # Predictions
    y_pred = pipeline.predict(X_test_fe)
    
    # Metrics
    rmse = np.sqrt(mean_squared_error(y_test, y_pred))
    mae = mean_absolute_error(y_test, y_pred)
    r2 = r2_score(y_test, y_pred)
    
    results[name] = {
        'RMSE': rmse,
        'MAE': mae,
        'R2': r2,
        'pipeline': pipeline
    }
    
    print(f"{name}:")
    print(f"  RMSE: ${rmse:,.0f}")
    print(f"  MAE: ${mae:,.0f}")
    print(f"  R²: {r2:.3f}")
    print()</code></pre>
                </div>
            </div>

            <div class="info-box">
                <h4>💡 Implementation Tips</h4>
                <ul>
                    <li><strong>Start Simple:</strong> Begin with linear regression to establish a baseline</li>
                    <li><strong>Feature Selection:</strong> Use correlation analysis and feature importance</li>
                    <li><strong>Cross-Validation:</strong> Use 5-fold CV to ensure robust performance estimates</li>
                    <li><strong>Hyperparameter Tuning:</strong> Use GridSearchCV or RandomizedSearchCV</li>
                    <li><strong>Model Comparison:</strong> Compare models using multiple metrics</li>
                </ul>
            </div>
        </div>

        <!-- Evaluation Section -->
        <div id="evaluation" class="assignment-section">
            <h2>Model Evaluation</h2>

            <h3>📊 Evaluation Metrics</h3>
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Regression Metrics Implementation</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">def evaluate_model(y_true, y_pred, model_name):
    """Comprehensive model evaluation"""
    
    # Calculate metrics
    rmse = np.sqrt(mean_squared_error(y_true, y_pred))
    mae = mean_absolute_error(y_true, y_pred)
    r2 = r2_score(y_true, y_pred)
    mape = np.mean(np.abs((y_true - y_pred) / y_true)) * 100
    
    # Create evaluation report
    evaluation = {
        'Model': model_name,
        'RMSE': f"${rmse:,.0f}",
        'MAE': f"${mae:,.0f}",
        'R²': f"{r2:.3f}",
        'MAPE': f"{mape:.2f}%"
    }
    
    return evaluation

# Visualize predictions vs actual
def plot_predictions(y_true, y_pred, model_name):
    plt.figure(figsize=(10, 6))
    
    plt.subplot(1, 2, 1)
    plt.scatter(y_true, y_pred, alpha=0.5)
    plt.plot([y_true.min(), y_true.max()], [y_true.min(), y_true.max()], 'r--', lw=2)
    plt.xlabel('Actual Values')
    plt.ylabel('Predicted Values')
    plt.title(f'{model_name}: Predictions vs Actual')
    
    plt.subplot(1, 2, 2)
    residuals = y_true - y_pred
    plt.scatter(y_pred, residuals, alpha=0.5)
    plt.axhline(y=0, color='r', linestyle='--')
    plt.xlabel('Predicted Values')
    plt.ylabel('Residuals')
    plt.title(f'{model_name}: Residual Plot')
    
    plt.tight_layout()
    plt.show()</code></pre>
                </div>
            </div>

            <h3>🔍 Cross-Validation</h3>
            <div class="step-card">
                <div class="step-number">2</div>
                <h4>Robust Model Validation</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">from sklearn.model_selection import cross_val_score, cross_validate

def cross_validate_model(pipeline, X, y, cv=5):
    """Perform cross-validation with multiple metrics"""
    
    scoring = ['neg_mean_squared_error', 'neg_mean_absolute_error', 'r2']
    
    cv_results = cross_validate(pipeline, X, y, cv=cv, scoring=scoring)
    
    results = {
        'RMSE_CV': np.sqrt(-cv_results['test_neg_mean_squared_error']),
        'MAE_CV': -cv_results['test_neg_mean_absolute_error'],
        'R2_CV': cv_results['test_r2']
    }
    
    return results

# Cross-validate best models
best_models = ['Random Forest', 'Gradient Boosting']

for model_name in best_models:
    pipeline = results[model_name]['pipeline']
    cv_results = cross_validate_model(pipeline, X_train_fe, y_train)
    
    print(f"{model_name} Cross-Validation Results:")
    print(f"  RMSE: ${cv_results['RMSE_CV'].mean():,.0f} ± ${cv_results['RMSE_CV'].std():,.0f}")
    print(f"  MAE: ${cv_results['MAE_CV'].mean():,.0f} ± ${cv_results['MAE_CV'].std():,.0f}")
    print(f"  R²: {cv_results['R2_CV'].mean():.3f} ± {cv_results['R2_CV'].std():.3f}")
    print()</code></pre>
                </div>
            </div>

            <h3>⚙️ Hyperparameter Tuning</h3>
            <div class="step-card">
                <div class="step-number">3</div>
                <h4>Optimize Model Performance</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python">from sklearn.model_selection import GridSearchCV, RandomizedSearchCV

# Hyperparameter tuning for Random Forest
rf_pipeline = Pipeline([
    ('preprocessor', preprocessor),
    ('regressor', RandomForestRegressor(random_state=42))
])

rf_param_grid = {
    'regressor__n_estimators': [100, 200, 300],
    'regressor__max_depth': [10, 20, None],
    'regressor__min_samples_split': [2, 5, 10],
    'regressor__min_samples_leaf': [1, 2, 4]
}

# Grid search
rf_grid_search = GridSearchCV(
    rf_pipeline, 
    rf_param_grid, 
    cv=5, 
    scoring='neg_mean_squared_error',
    n_jobs=-1,
    verbose=1
)

rf_grid_search.fit(X_train_fe, y_train)

print("Best Random Forest Parameters:")
print(rf_grid_search.best_params_)

# Evaluate tuned model
best_rf = rf_grid_search.best_estimator_
y_pred_tuned = best_rf.predict(X_test_fe)
rmse_tuned = np.sqrt(mean_squared_error(y_test, y_pred_tuned))

print(f"\nTuned Random Forest RMSE: ${rmse_tuned:,.0f}")</code></pre>
                </div>
            </div>

            <div class="evaluation-criteria">
                <h4>🎯 Evaluation Criteria</h4>
                <div class="criteria-grid">
                    <div class="criteria-item">
                        <h5>Accuracy (40%)</h5>
                        <p>RMSE < $50,000<br>R² > 0.8<br>Low residual patterns</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Code Quality (25%)</h5>
                        <p>Clean, documented code<br>Proper error handling<br>Modular structure</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Analysis (20%)</h5>
                        <p>Thorough EDA<br>Feature importance<br>Model comparison</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Deployment (15%)</h5>
                        <p>Working API<br>Error handling<br>Documentation</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deployment Section -->
        <div id="deployment" class="assignment-section">
            <h2>Model Deployment</h2>

            <h3>🚀 Create a Flask API</h3>
            <div class="step-card">
                <div class="step-number">1</div>
                <h4>Flask Application</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python"># api/app.py
from flask import Flask, request, jsonify
import joblib
import pandas as pd
import numpy as np

app = Flask(__name__)

# Load trained model and preprocessor
model = joblib.load('../models/trained_model.pkl')
preprocessor = joblib.load('../models/preprocessor.pkl')

@app.route('/predict', methods=['POST'])
def predict():
    try:
        # Get JSON data
        data = request.get_json()
        
        # Convert to DataFrame
        input_df = pd.DataFrame([data])
        
        # Apply feature engineering
        input_df = create_features(input_df)
        
        # Make prediction
        prediction = model.predict(input_df)[0]
        
        # Return result
        return jsonify({
            'predicted_price': float(prediction),
            'status': 'success'
        })
    
    except Exception as e:
        return jsonify({
            'error': str(e),
            'status': 'error'
        }), 400

@app.route('/health', methods=['GET'])
def health():
    return jsonify({'status': 'healthy'})

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=5000)</code></pre>
                </div>
            </div>

            <h3>📋 API Documentation</h3>
            <div class="step-card">
                <div class="step-number">2</div>
                <h4>Usage Example</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-python"># test_api.py
import requests
import json

# API endpoint
url = 'http://localhost:5000/predict'

# Sample house data
sample_house = {
    'MedInc': 8.3252,
    'HouseAge': 41.0,
    'AveRooms': 6.984127,
    'AveBedrms': 1.023810,
    'Population': 322.0,
    'AveOccup': 2.555556,
    'Latitude': 37.88,
    'Longitude': -122.23
}

# Make prediction request
response = requests.post(url, json=sample_house)

if response.status_code == 200:
    result = response.json()
    print(f"Predicted Price: ${result['predicted_price']:,.2f}")
else:
    print(f"Error: {response.json()}")</code></pre>
                </div>
            </div>

            <h3>🐳 Docker Deployment (Bonus)</h3>
            <div class="step-card">
                <div class="step-number">3</div>
                <h4>Dockerfile</h4>
                <div class="code-block">
                    <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                    <pre><code class="language-dockerfile"># Dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 5000

CMD ["python", "app.py"]</code></pre>
                </div>
            </div>

            <div class="success-box">
                <h4>🎉 Deployment Checklist</h4>
                <ul>
                    <li>✅ Model saved as pickle file</li>
                    <li>✅ Flask API with prediction endpoint</li>
                    <li>✅ Error handling and validation</li>
                    <li>✅ API documentation</li>
                    <li>✅ Health check endpoint</li>
                    <li>✅ Requirements.txt file</li>
                    <li>🌟 Docker containerization (bonus)</li>
                </ul>
            </div>
        </div>

        <!-- Submission Section -->
        <div id="submission" class="assignment-section">
            <h2>Submission Guidelines</h2>

            <h3>📦 Deliverables</h3>
            <div class="deliverable-checklist">
                <h4>Required Submissions</h4>
                <div class="checklist-item">
                    <input type="checkbox" id="sub1">
                    <label for="sub1"><strong>Complete Project Folder</strong> with organized structure</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub2">
                    <label for="sub2"><strong>Jupyter Notebooks</strong> (4 notebooks covering all phases)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub3">
                    <label for="sub3"><strong>Python Scripts</strong> (modular code for production)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub4">
                    <label for="sub4"><strong>Trained Models</strong> (saved as pickle files)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub5">
                    <label for="sub5"><strong>Flask API</strong> (working web service)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub6">
                    <label for="sub6"><strong>README.md</strong> (comprehensive documentation)</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="sub7">
                    <label for="sub7"><strong>Requirements.txt</strong> (all dependencies)</label>
                </div>
            </div>

            <h3>📝 README Template</h3>
            <div class="code-block">
                <button class="copy-button" onclick="copyToClipboard(this)">Copy</button>
                <pre><code class="language-markdown"># House Price Prediction System

## Project Overview
Brief description of the project and business problem.

## Dataset
- Source: California Housing Dataset
- Size: 20,640 samples
- Features: 8 numerical + 1 categorical

## Methodology
1. **Data Exploration**: EDA and visualization
2. **Preprocessing**: Missing values, outliers, scaling
3. **Feature Engineering**: Created X new features
4. **Model Training**: Compared Y algorithms
5. **Evaluation**: Cross-validation and metrics
6. **Deployment**: Flask API

## Results
- Best Model: [Model Name]
- RMSE: $X,XXX
- R²: 0.XXX
- MAE: $X,XXX

## Usage
```bash
# Install dependencies
pip install -r requirements.txt

# Run API
python api/app.py

# Make prediction
python test_api.py
```

## Project Structure
[Include your folder structure here]

## Future Improvements
- List potential enhancements
- Additional features to explore
- Deployment considerations</code></pre>
            </div>

            <h3>🎯 Grading Rubric</h3>
            <div class="evaluation-criteria">
                <h4>Assessment Breakdown (100 points)</h4>
                <div class="criteria-grid">
                    <div class="criteria-item">
                        <h5>Data Analysis (25 pts)</h5>
                        <p>• EDA quality<br>• Insights extraction<br>• Visualization effectiveness</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Model Development (30 pts)</h5>
                        <p>• Algorithm selection<br>• Feature engineering<br>• Performance optimization</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Code Quality (20 pts)</h5>
                        <p>• Structure and organization<br>• Documentation<br>• Best practices</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Deployment (15 pts)</h5>
                        <p>• Working API<br>• Error handling<br>• User experience</p>
                    </div>
                    <div class="criteria-item">
                        <h5>Documentation (10 pts)</h5>
                        <p>• README quality<br>• Code comments<br>• Usage instructions</p>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h4>⏰ Submission Deadline</h4>
                <p><strong>Due Date:</strong> [Insert specific date]<br>
                <strong>Submission Method:</strong> Upload ZIP file to learning platform<br>
                <strong>File Size Limit:</strong> Maximum 50MB (exclude large data files)<br>
                <strong>Late Penalty:</strong> -10% per day late</p>
            </div>

            <div class="info-box">
                <h4>📞 Support</h4>
                <p>If you have questions:</p>
                <ul>
                    <li>Post in the course discussion forum</li>
                    <li>Attend office hours (Tuesdays 2-4 PM)</li>
                    <li>Email instructor: instructor@university.edu</li>
                </ul>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 0%" id="progressBar"></div>
            </div>
            <p style="text-align: center; margin-top: 10px;">Assignment Completion: <span id="progressText">0%</span></p>
        </div>
    </div>

    <script>
        // Navigation functionality
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.assignment-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav pills
            const pills = document.querySelectorAll('.nav-pill');
            pills.forEach(pill => {
                pill.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked nav pill
            event.target.classList.add('active');
        }

        // Copy to clipboard functionality
        function copyToClipboard(button) {
            const codeBlock = button.nextElementSibling;
            const text = codeBlock.textContent;
            
            navigator.clipboard.writeText(text).then(function() {
                button.textContent = 'Copied!';
                button.style.background = '#28a745';
                
                setTimeout(function() {
                    button.textContent = 'Copy';
                    button.style.background = '#667eea';
                }, 2000);
            });
        }

        // Progress tracking
        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked');
            const progress = (checkedBoxes.length / checkboxes.length) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '%';
        }

        // Add event listeners to checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', updateProgress);
        });

        // Initialize progress
        updateProgress();
    </script>
</body>
</html>